# Diagrama de Flujo: Sistema Multi-Agente v1.0

## ๐ Flujo Completo de Generaciรณn

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    USUARIO INICIA                                โ
โ           "Quiero crear una guรญa de Trigonometrรญa"              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                             โ
                             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ               ASISTENTE PRINCIPAL (Fase 1)                       โ
โ                  Consumo: ~2,000 tokens                          โ
โ                  Tiempo: ~30 segundos                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โ Pregunta 1: Tรญtulo                                           โ
โ  โ Pregunta 2: Autor                                            โ
โ  โ Pregunta 3: Instituciรณn                                      โ
โ  โ Pregunta 4: Fecha                                            โ
โ  โ Pregunta 5: Tรญtulo corto                                     โ
โ  โ Pregunta 6: Grado                                            โ
โ  โ Pregunta 7: Asignatura                                       โ
โ  โ Pregunta 8: Elementos clave                                  โ
โ  โ Pregunta 9: Aplicaciones                                     โ
โ  โ Pregunta 10: Ejemplos                                        โ
โ  โ Pregunta 11: Ejercicios                                      โ
โ  โ Pregunta 12: Ejercicios inversos                             โ
โ  โ Pregunta 13: Carpeta                                         โ
โ  โ Pregunta 14: Archivo                                         โ
โ                                                                  โ
โ  โ Muestra resumen                                              โ
โ  โ Solicita confirmaciรณn                                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                             โ Usuario confirma: "Sรญ"
                             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ            ASISTENTE PRINCIPAL (Fase 2)                          โ
โ                                                                  โ
โ    Invoca 3 TASK TOOLS EN PARALELO (1 solo mensaje)            โ
โโโโโโฌโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโ
     โ                    โ                    โ
     โ                    โ                    โ
     โผ                    โผ                    โผ
โโโโโโโโโโโ         โโโโโโโโโโโ         โโโโโโโโโโโ
โSUBAGENTEโ         โSUBAGENTEโ         โSUBAGENTEโ
โ    1    โ         โ    2    โ         โ    3    โ
โโโโโโโโโโโ         โโโโโโโโโโโ         โโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            EJECUCIรN EN PARALELO (~1-1.5 minutos)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโ
โ   SUBAGENTE 1        โ  โ   SUBAGENTE 2        โ  โ   SUBAGENTE 3        โ
โ  Modelo: Opus        โ  โ  Modelo: Opus        โ  โ  Modelo: Opus        โ
โ  Tiempo: ~1 min      โ  โ  Tiempo: ~1.5 min    โ  โ  Tiempo: ~1.5 min    โ
โ  Tokens: Propio      โ  โ  Tokens: Propio      โ  โ  Tokens: Propio      โ
โโโโโโโโโโโโโโโโโโโโโโโโค  โโโโโโโโโโโโโโโโโโโโโโโโค  โโโโโโโโโโโโโโโโโโโโโโโโค
โ GENERA:              โ  โ GENERA:              โ  โ GENERA:              โ
โ                      โ  โ                      โ  โ                      โ
โ โ Preรกmbulo completo โ  โ โ 7 Ejemplos         โ  โ โ 8 Ejercicios       โ
โ   - Paquetes         โ  โ   resueltos          โ  โ   propuestos         โ
โ   - Colores          โ  โ   (paso a paso)      โ  โ                      โ
โ   - Entornos         โ  โ                      โ  โ โ 8 Soluciones       โ
โ   - Fancyhdr         โ  โ โ Grรกficas TikZ      โ  โ   detalladas         โ
โ                      โ  โ   para cada uno      โ  โ   (paso a paso)      โ
โ โ Portada            โ  โ                      โ  โ                      โ
โ                      โ  โ โ 3-5 Ejercicios     โ  โ โ Grรกficas donde     โ
โ โ Tabla contenidos   โ  โ   inversos           โ  โ   aplique            โ
โ                      โ  โ                      โ  โ                      โ
โ โ Introducciรณn       โ  โ โ Soluciones de      โ  โ โ Verificaciones     โ
โ   (2 pรกginas)        โ  โ   inversos           โ  โ                      โ
โ                      โ  โ                      โ  โ                      โ
โ โ Conceptos          โ  โ โ Verificaciones     โ  โ                      โ
โ   fundamentales      โ  โ                      โ  โ                      โ
โ   (3-5 pรกginas)      โ  โ                      โ  โ                      โ
โ                      โ  โ                      โ  โ                      โ
โ โ Conclusiรณn         โ  โ                      โ  โ                      โ
โ                      โ  โ                      โ  โ                      โ
โ โ Placeholders       โ  โ                      โ  โ                      โ
โ   %INSERTAR...       โ  โ                      โ  โ                      โ
โโโโโโโโโโโโโโโโโโโโโโโโค  โโโโโโโโโโโโโโโโโโโโโโโโค  โโโโโโโโโโโโโโโโโโโโโโโโค
โ SALIDA:              โ  โ SALIDA:              โ  โ SALIDA:              โ
โ parte1_base.tex      โ  โ parte2_ejemplos.tex  โ  โ parte3_ejercicios.texโ
โ (~8 pรกginas)         โ  โ (~15 pรกginas)        โ  โ (~12 pรกginas)        โ
โโโโโโโโโโโโฌโโโโโโโโโโโโ  โโโโโโโโโโโโฌโโโโโโโโโโโโ  โโโโโโโโโโโโฌโโโโโโโโโโโโ
           โ                         โ                         โ
           โโโโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                     โ
                                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ            ASISTENTE PRINCIPAL (Fase 3)                          โ
โ                  Consumo: ~3,000 tokens                          โ
โ                  Tiempo: ~1 minuto                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  1. ENSAMBLAR LAS 3 PARTES:                                     โ
โ     โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ         โ
โ     โ GuiaFinal.tex                                   โ         โ
โ     โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค         โ
โ     โ [Preรกmbulo de parte1]                           โ         โ
โ     โ \begin{document}                                โ         โ
โ     โ [Portada de parte1]                             โ         โ
โ     โ [TOC de parte1]                                 โ         โ
โ     โ [Introducciรณn de parte1]                        โ         โ
โ     โ [Conceptos de parte1]                           โ         โ
โ     โ                                                 โ         โ
โ     โ %REEMPLAZAR con parte2:                        โ         โ
โ     โ [Ejemplos resueltos de parte2]                  โ         โ
โ     โ [Ejercicios inversos de parte2]                 โ         โ
โ     โ [Soluciones inversos de parte2]                 โ         โ
โ     โ                                                 โ         โ
โ     โ %REEMPLAZAR con parte3:                        โ         โ
โ     โ [Ejercicios propuestos de parte3]               โ         โ
โ     โ [Soluciones detalladas de parte3]               โ         โ
โ     โ                                                 โ         โ
โ     โ [Conclusiรณn de parte1]                          โ         โ
โ     โ \end{document}                                  โ         โ
โ     โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ         โ
โ                                                                  โ
โ  2. VERIFICAR CONSISTENCIA:                                     โ
โ     โ Numeraciรณn de secciones                                   โ
โ     โ Estilo uniforme                                           โ
โ     โ Todos los entornos cerrados                               โ
โ                                                                  โ
โ  3. COMPILAR:                                                   โ
โ     $ lualatex GuiaFinal.tex                                    โ
โ     $ lualatex GuiaFinal.tex  (2da pasada para TOC)             โ
โ                                                                  โ
โ  4. CREAR README.md:                                            โ
โ     โ Descripciรณn                                               โ
โ     โ Especificaciones                                          โ
โ     โ Contenido                                                 โ
โ     โ Estructura                                                โ
โ     โ Compilaciรณn                                               โ
โ                                                                  โ
โ  5. GUARDAR EN GIT:                                             โ
โ     $ git add ...                                               โ
โ     $ git commit -m "Agregada guรญa de..."                       โ
โ     $ git push origin main                                      โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                             โ
                             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         RESULTADO FINAL                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โ GuiaFinal.tex       (cรณdigo fuente completo)                โ
โ  โ GuiaFinal.pdf       (25-35 pรกginas compiladas)              โ
โ  โ README.md           (documentaciรณn)                          โ
โ  โ Commit en git       (guardado local)                         โ
โ  โ Push remoto         (respaldo en GitHub)                     โ
โ                                                                  โ
โ  ๐ ESTADรSTICAS:                                               โ
โ     Tiempo total: ~2 minutos                                    โ
โ     Tokens usados: ~5,000 (del presupuesto principal)           โ
โ     Pรกginas: 25-35 pรกginas                                      โ
โ     Tamaรฑo PDF: 150-250 KB                                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ Comparaciรณn: 1 Agente vs 3 Agentes

### Con 1 Agente (versiรณn anterior):

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ASISTENTE โ SUBAGENTE 1             โ
โ              (secuencial)             โ
โ                                       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ         โ
โ  โ Genera TODO             โ         โ
โ  โ โข Preรกmbulo             โ         โ
โ  โ โข Introducciรณn          โ         โ
โ  โ โข Conceptos             โ         โ
โ  โ โข Ejemplos              โ  3-4 minโ
โ  โ โข Ejercicios            โ         โ
โ  โ โข Soluciones            โ         โ
โ  โ โข Conclusiรณn            โ         โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ         โ
โ                                       โ
โ  Total: ~5 minutos                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Con 3 Agentes (versiรณn actual):

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ASISTENTE โ 3 SUBAGENTES EN PARALELO               โ
โ                                                       โ
โ  โโโโโโโโโโโ  โโโโโโโโโโโ  โโโโโโโโโโโ             โ
โ  โ Agente1 โ  โ Agente2 โ  โ Agente3 โ             โ
โ  โ Base    โ  โ Ejemplosโ  โEjercici.โ   1.5 min   โ
โ  โ 8 pags  โ  โ 15 pags โ  โ 12 pags โ   (mรกximo)  โ
โ  โโโโโโโโโโโ  โโโโโโโโโโโ  โโโโโโโโโโโ             โ
โ                     โ                                โ
โ            Ensamblaje: 30 seg                        โ
โ                                                       โ
โ  Total: ~2 minutos                                   โ
โ  Ahorro: 60% mรกs rรกpido                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฏ Ventajas Clave

### 1. Paralelizaciรณn Real
```
Tiempo tradicional: A + B + C = 5 minutos
Tiempo paralelo: max(A, B, C) = 1.5 minutos + ensamblaje (0.5 min) = 2 min
```

### 2. Especializaciรณn
```
Cada agente es experto en su tarea:
โข Agente 1: Estructura y teorรญa
โข Agente 2: Ejemplos prรกcticos con grรกficas
โข Agente 3: Ejercitaciรณn y evaluaciรณn
```

### 3. Balance de Carga
```
Agente 1: ~8 pรกginas  (~1.0 min)
Agente 2: ~15 pรกginas (~1.5 min)  โ Cuello de botella
Agente 3: ~12 pรกginas (~1.5 min)

Bien balanceado (diferencia < 50%)
```

### 4. Robustez
```
Si 1 agente falla:
โโ Los otros 2 continรบan
โโ Solo se reintenta la parte fallida
โโ No se pierde el progreso general
```

---

## ๐พ Consumo de Tokens

```
Presupuesto Principal (~5,000 tokens):
โโ Preguntas y confirmaciรณn: 2,000
โโ Invocaciรณn de 3 Task tools: 500
โโ Ensamblaje y finalizaciรณn: 2,500

Presupuestos Independientes (no cuentan):
โโ Subagente 1: ~20,000 tokens
โโ Subagente 2: ~30,000 tokens
โโ Subagente 3: ~25,000 tokens

Total del presupuesto principal: ~5,000 โ
(Los subagentes usan sus propios presupuestos)
```

---

## โก Ejemplo de Invocaciรณn Paralela

```javascript
// El asistente principal envรญa en UN SOLO MENSAJE:

Task({
  subagent_type: "general-purpose",
  model: "opus",
  description: "Generar base",
  prompt: "PARTE 1/3: Base..."
})

Task({
  subagent_type: "general-purpose",
  model: "opus",
  description: "Generar ejemplos",
  prompt: "PARTE 2/3: Ejemplos..."
})

Task({
  subagent_type: "general-purpose",
  model: "opus",
  description: "Generar ejercicios",
  prompt: "PARTE 3/3: Ejercicios..."
})

// Los 3 se ejecutan SIMULTรNEAMENTE
```

---

**Versiรณn:** 1.0 Multi-Agente
**Fecha:** Noviembre 2025
**Optimizaciรณn:** 60% mรกs rรกpido, mismo costo
